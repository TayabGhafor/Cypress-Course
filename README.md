# Cypress Course ğŸš€

E2E-tested Next.js 13 app with Cypress. This README covers setup, running the app, executing tests, and where to find all artifacts (screenshots, videos, and coverage).

## Table of Contents ğŸ§­
- [Tech Stack](#tech-stack)
- [Prerequisites](#prerequisites)
- [Installation](#installation)
- [Run the App](#run-the-app)
- [Run E2E Tests](#run-e2e-tests)
- [Test Artifacts & Results](#test-artifacts-and-results)
- [Configuration](#configuration)
- [Common Workflows](#common-workflows)
- [Scripts](#scripts)
- [Troubleshooting](#troubleshooting)

## Repository Map ğŸ—‚ï¸
- App entry: [`app/page.js`](./app/page.js)
- Cypress config: [`cypress.config.js`](./cypress.config.js)
- Tests: [`cypress/e2e/`](./cypress/e2e/)
- Fixtures: [`cypress/fixtures/`](./cypress/fixtures/)
- Support: [`cypress/support/`](./cypress/support/)
- Screenshots: [`cypress/screenshots/`](./cypress/screenshots/)
- Videos: [`cypress/videos/`](./cypress/videos/)
- Coverage summary: [`TEST_COVERAGE.md`](./TEST_COVERAGE.md)

<a id="tech-stack"></a>
## Tech Stack ğŸ› ï¸

- Next.js 13 ([`app/`](./app/) directory)
- React 18
- Cypress for E2E testing

<a id="prerequisites"></a>
## Prerequisites âœ…

- Node.js and npm installed
- macOS/Linux/Windows supported

<a id="installation"></a>
## Installation ğŸ“¦

```bash
npm install
```

<a id="run-the-app"></a>
## Run the App ğŸƒâ€â™‚ï¸

```bash
npm run dev
```

- App runs at [http://localhost:3000](http://localhost:3000) ğŸ”—
- Edit the main page at [`app/page.js`](./app/page.js) âœï¸

<a id="run-e2e-tests"></a>
## Run E2E Tests ğŸ§ª

The Cypress base URL is configured as `http://localhost:3000` in [`cypress.config.js`](./cypress.config.js). Ensure the dev server is running before headless runs.

### Interactive

```bash
npm run cypress:open
```

### Headless (CI)

```bash
npm run cypress:run
```

<a id="test-artifacts-and-results"></a>
## Test Artifacts & Results ğŸ“

- Screenshots: [`cypress/screenshots/`](./cypress/screenshots/) ğŸ–¼ï¸
- Videos (generated by headless runs): [`cypress/videos/`](./cypress/videos/) ğŸ¥
- Console/spec output: printed to the terminal during `npm run cypress:run` ğŸ–¨ï¸
- Test coverage summary: [`TEST_COVERAGE.md`](./TEST_COVERAGE.md) ğŸ“Š

Example folders already present in this repo:

- [`cypress/e2e/`](./cypress/e2e/) â€” test spec files (`*.cy.js`)
- [`cypress/fixtures/`](./cypress/fixtures/) â€” test data
- [`cypress/support/`](./cypress/support/) â€” shared commands and setup
- [`cypress/screenshots/`](./cypress/screenshots/) â€” saved failure screenshots and snapshots from previous runs

<a id="configuration"></a>
## Configuration âš™ï¸

- Cypress config: [`cypress.config.js`](./cypress.config.js)
  - `e2e.baseUrl`: `http://localhost:3000`
  - `projectId`: configured for optional Cypress Cloud usage

<a id="common-workflows"></a>
## Common Workflows ğŸ”§

- Start app and run tests interactively:
  1. `npm run dev`
  2. `npm run cypress:open`

- Start app and run tests headlessly (with screenshots/videos):
  1. `npm run dev`
  2. `npm run cypress:run`

<a id="scripts"></a>
## Scripts ğŸ“

- `npm run dev` â€” start Next.js dev server
- `npm run build` â€” build for production
- `npm run start` â€” start production server
- `npm run lint` â€” run Next.js linting
- `npm run cypress:open` â€” open Cypress Test Runner
- `npm run cypress:run` â€” run Cypress tests headlessly

<a id="troubleshooting"></a>
## Troubleshooting ğŸ§¯

### Connection issues ğŸ”Œ
- Ensure the app is running: `npm run dev`
- Verify the URL opens in a browser: [http://localhost:3000](http://localhost:3000)
- Confirm base URL matches your app port in [`cypress.config.js`](./cypress.config.js)

### Port or URL changed ğŸ”—
1. Update `e2e.baseUrl` in [`cypress.config.js`](./cypress.config.js)
2. Restart the dev server: `npm run dev`
3. Re-run tests: `npm run cypress:open` or `npm run cypress:run`

### Reset artifacts ğŸ—‘ï¸
- Clear previous run outputs if they clutter results:
  - Screenshots: [`./cypress/screenshots/`](./cypress/screenshots/)
  - Videos: [`./cypress/videos/`](./cypress/videos/)
- Example (macOS/Linux):
  ```bash
  rm -rf ./cypress/screenshots/* ./cypress/videos/*
  ```

### Runner fails to launch ğŸ§ª
- Install dependencies: `npm install`
- Open interactive runner: `npm run cypress:open`
- If issues persist, remove `node_modules` and reinstall:
  ```bash
  rm -rf node_modules package-lock.json
  npm install
  ```

### Headless debugging ğŸ§ 
- Run a single spec for faster feedback:
  ```bash
  npm run cypress:run -- --spec cypress/e2e/<file>.cy.js
  ```
- Inspect terminal output for failing step and reference fixtures/support:
  - Fixtures: [`./cypress/fixtures/`](./cypress/fixtures/)
  - Support: [`./cypress/support/`](./cypress/support/)
